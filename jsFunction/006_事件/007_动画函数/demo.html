<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>动画函数</title>
	<style>
		* {
			margin: 0;
			padding: 0;
		}
		body {
			padding: 40px 0;
			background: #ccc;
		}
		.gp {
			margin: 0 auto;
			padding: 20px;
			width: 600px;
			min-height: 200px;
			background: #fff;
			border-radius: 10px;
			box-sizing: border-box;
		}
		.gp+.gp {
			margin-top: 20px;
		}
		.gp h5 {
			margin-bottom: 20px;
		}


		.gp1 .box1 {
			margin-top: 10px;
			width: 300px;
			height: 40px;
			border: 1px solid #999;
		}


		.gp2 .box2 {
			margin-top: 10px;
			width: 100px;
			height: 300px;
			border: 2px solid #ccc;
			overflow-y: auto;
		}
		.gp2 .box2 div {
			margin: 0 auto;
			width: 40px;
			height: 1000px;
			background: #df0;
		}

		.gp3 {
			height: 400px;
		}
		.gp3 .box3 {
			margin-top: 10px;
			width: 300px;
			height: 40px;
			border: 1px solid #999;
		}
	</style>
</head>
<body>

	<div class="gp gp1">
		<h5>改变尺寸</h5>
		<button id="btn1">改变尺寸</button>
		<div class="box1"></div>
	</div>

	<div class="gp gp2">
		<h5>改变滚动高度</h5>
		<button id="btn2">改变滚动高度</button>
		<div class="box2">
			<div></div>
		</div>
	</div>

	<div class="gp gp3">
		<h5>改变尺寸</h5>
		<button id="btn3">改变尺寸</button>
		<div class="box3"></div>
	</div>

	<script src="requestAnimationFrame.js"></script>
	<script src="animate.js"></script>
	<script>

		function getStyle (obj, name) {
		    if(window.getComputedStyle) {
		        return getComputedStyle(obj, null)[name];
		    } else {
		        return obj.currentStyle[name];
		    }
		}

		var oInit1 = {
			init: function () {
				this.oBtn = document.querySelector('#btn1');
				this.oBox = document.querySelector('.box1');

				this.width = parseInt(getStyle(this.oBox, 'width'));
				this.height = parseInt(getStyle(this.oBox, 'height'));
				this.isChange = false;

				this.initEvent();
			},
			initEvent: function () {
				var _this = this;

				this.oBtn.onclick = function () {
					if ( _this.isChange ) {
						animate(_this.oBox, {width: _this.width, height: _this.height}, 500);
					} else {
						animate(_this.oBox, {width: 100, height: 60}, 500);
					}
					_this.isChange = !_this.isChange;
				}
			}
		}

		var oInit2 = {
			init: function () {
				this.oBtn = document.querySelector('#btn2');
				this.oBox = document.querySelector('.box2');

				this.isChange = false;

				this.initEvent();
			},
			initEvent: function () {
				var _this = this;

				this.oBtn.onclick = function () {
					if ( _this.isChange ) {
						animate(_this.oBox, {scrollTop: 0}, 1000);
					} else {
						animate(_this.oBox, {scrollTop: 500}, 1000);
					}
					_this.isChange = !_this.isChange;
				}
			}
		}

		var oInit3 = {
			init: function () {
				this.oBtn = document.querySelector('#btn3');
				this.oBox = document.querySelector('.box3');

				this.isChange = false;

				this.initEvent();
			},
			initEvent: function () {
				var _this = this;

				this.oBtn.onclick = function () {
					if ( _this.isChange ) {
						animate(_this.oBox, {width: 500, height: 200}, 1000);
					} else {
						animate(_this.oBox, {width: 100, height: 60}, 500);
					}
					_this.isChange = !_this.isChange;
				}
			}
		}


		oInit1.init();
		oInit2.init();
		oInit3.init();
	</script>
</body>
</html>