<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>Hello</title>
	<style>
		* {
			margin: 0;
			padding: 0;
		}
		body {
			background: #000C2E;
		}

		.main {
			padding: 50px;
		}

		.data-nums {
		    margin-bottom: 1.8vw;
		}
		.data-nums::after {
		    content: "";
		    display: block;
		    clear: both;
		}
		.data-nums > div {
		    float: left;
		    height: 2.2vw;
		    font-size: 1.6vw;
		    color: #FFEF00;
		    line-height: 2.2vw;
		}
		.data-nums > .item {
		    position: relative;
		    width: 1.8vw;
		    background: #002A80;
		    text-align: center;
		    overflow: hidden;
		}
		.data-nums > .item+.item {
		    margin-left: .5vw;
		}
		.data-nums > .dot {
		    padding-left: .3vw;
		    width: 1vw;
		    text-align: left;
		}
		.data-nums .num-group {
		    position: absolute;
		    top: 0;
		    left: 0;
		    z-index: 10;
		    width: 100%;
		}
		.data-nums .num {
		    width: 100%;
		}
	</style>
</head>
<body>

	<div class="main">

		<div id="dataNums"></div>

	</div>
		
	
	<script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script>
	<script>
		;(function ($, window, document) {
			/**
			 滚动数字构造函数，
			 可以隔几秒调用setNum方法设置新数，
			 但是时间间隔必须大于4秒，不然会被忽略掉哈！
			 */
			function RullNum (obj, options) {
				var defaults = {
					deVal: 0,       //传入值
			        className:'data-nums',   //样式名称
			        digit:''    	//默认显示几位数字
				}

				this.obj = obj;
				this.options = $.extend(defaults, options);
				this.options.deVal = '' + this.options.deVal;

				this.time = 0;

				this.initHtml();
			}

			RullNum.prototype = {
				initHtml: function () {
					if(this.obj.find('.' + this.options.className).length <= 0){
						var html = `<div class="${this.options.className}">`;
						var valLen = this.options.digit || this.options.deVal.length;

						var strItem = '';
						var iH = parseInt($("body").innerWidth() / 100 * 2.2);

						for (var i = 0; i < valLen; i++) {
							var str = `<div class="item">
										<div class="num-group">
											<span class="num0">0</span>
											<span class="num1">1</span>
											<span class="num2">2</span>
											<span class="num3">3</span>
											<span class="num4">4</span>
											<span class="num5">5</span>
											<span class="num6">6</span>
											<span class="num7">7</span>
											<span class="num8">8</span>
											<span class="num9">9</span>
											<span class="num0">0</span>
											<span class="num1">1</span>
											<span class="num2">2</span>
											<span class="num3">3</span>
											<span class="num4">4</span>
											<span class="num5">5</span>
											<span class="num6">6</span>
											<span class="num7">7</span>
											<span class="num8">8</span>
											<span class="num9">9</span>
										</div>
									</div>`;
							if ((i + 1) % 3 == 0 && i < valLen -1) {
								str = `<div class="dot">,</div>` + str;
							}
							strItem = str + strItem;
						}
						html = html + strItem + `</div>`;
						this.obj.html(html);

						this.obj.find('.' + this.options.className + " > div").css({
							height: iH + 'px',
							lineHeight: iH + 'px'
						})
					}
					
					this.setNum(this.options.deVal);
				},

				setNum: function (number) {
					var time = new Date().getTime();
					if (time - this.time < 4 * 1000) {
						return false;
					}
					this.time = time;

					var $num_item = this.obj.find('.' + this.options.className).find('.num-group');
		            var h = this.obj.find('.item').innerHeight();
		          
		            $num_item.css('transition','all 2s ease-in-out');
		            var numberStr = number.toString();
		            if(numberStr.length <= $num_item.length - 1){
		                var tempStr = '';
		                for(var a = 0; a < $num_item.length - numberStr.length; a++){
		                    tempStr += '0';
		                }
		                numberStr = tempStr + numberStr;
		            }

		            var numberArr = numberStr.split('');
		            $num_item.each(function(i, item) {
		                var oItem = $num_item.eq(i);
		                var oldNum = Math.abs(parseInt(oItem.css('top')) / h);
		                var newNum = numberArr[i]
		                if (oldNum != newNum) {
			                var iTop = -parseInt(numberArr[i])*h;
			                if (newNum < oldNum) {
			                	iTop = -parseInt(numberArr[i])*h - h*10;
			                }
			                $num_item.eq(i).css('top', iTop + 'px');
			                setTimeout(function () {
			                	$num_item.eq(i).css("transition", "none");
			                	$num_item.eq(i).css('top', -parseInt(numberArr[i])*h + 'px');
			                }, 3000);
		                }
		            });
				}
			}

			window.RullNum = RullNum;
		})(jQuery, window, document);


		var rullNum = new RullNum($("#dataNums"), {deVal: 123456789});

		setTimeout(function () {
			rullNum.setNum(153893234)
		}, 10 * 1000);

	</script>
</body>	
</html>